<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydra + VDO.Ninja Integration Example</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            background: #404040;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background: #505050;
        }

        button.active {
            background: #606060;
            outline: 2px solid #898989;
        }

        .view-link {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            display: none;
        }

        .view-link input {
            width: 100%;
            background: #1a1a1a;
            color: white;
            border: 1px solid #404040;
            padding: 8px;
            border-radius: 4px;
        }

        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }

        .status.streaming {
            background: #2a5c2a;
        }

        .status.stopped {
            background: #5c2a2a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hydra + VDO.Ninja Integration</h1>

        <div class="controls">
            <button id="startVDO">Start VDO.Ninja Stream</button>
            <button id="startTwitch">Start Twitch Stream</button>
            <button id="stopStream">Stop Stream</button>
            <button id="copyLink">Copy View Link</button>
        </div>

        <div class="view-link" id="viewLinkContainer">
            <label>View Link (share this to let others see your stream):</label>
            <input type="text" id="viewLink" readonly>
        </div>

        <div class="status" id="status">
            Stream Status: Stopped
        </div>

        <div id="hydra-container"></div>
    </div>

    <!-- Load Hydra -->
    <script src="https://unpkg.com/hydra-synth"></script>

    <!-- Load our integration library -->
    <script src="hydra-vdo-ninja.js"></script>

    <script>
        // Initialize Hydra
        const hydra = new Hydra({
            detectAudio: false,
            makeGlobal: true,
            width: 1280,
            height: 720
        });

        // Create some Hydra visuals
        osc(10, 0.1, 1.2)
            .rotate(() => time * 0.1)
            .kaleid(4)
            .out();

        // Initialize vdo.ninja integration
        const hydraVdo = new HydraVdoNinja(hydra, {
            width: 1280,
            height: 720,
            fps: 30
        });

        // UI Event Handlers
        document.getElementById('startVDO').addEventListener('click', () => {
            const result = hydraVdo.startVDOStream({
                pushId: 'hydra_' + Math.random().toString(36).substr(2, 8),
                roomName: 'hydra_room'
            });

            document.getElementById('viewLink').value = result.viewLink;
            document.getElementById('viewLinkContainer').style.display = 'block';
            updateStatus('streaming');
        });

        document.getElementById('startTwitch').addEventListener('click', () => {
            const twitchToken = prompt('Enter your Twitch Stream Token:');
            if (twitchToken) {
                hydraVdo.startTwitchStream(twitchToken);
                updateStatus('streaming');
            }
        });

        document.getElementById('stopStream').addEventListener('click', () => {
            hydraVdo.stopStreaming();
            updateStatus('stopped');
        });

        document.getElementById('copyLink').addEventListener('click', () => {
            hydraVdo.copyViewLink();
            alert('View link copied to clipboard!');
        });

        function updateStatus(status) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = `Stream Status: ${status === 'streaming' ? 'Streaming' : 'Stopped'}`;
            statusEl.className = `status ${status}`;
        }

        // Update status periodically
        setInterval(() => {
            // You could add more sophisticated status checking here
        }, 1000);
    </script>
</body>
</html>

